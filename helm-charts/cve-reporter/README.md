# Harbor CVE Email Reporter

## Status: Code Complete, Deployment Pending

**Session 005**: Helm chart and Python scripts created
**Session 006**: Requires custom Docker image for airgapped deployment

## Issue

The current deployment fails in airgapped environments because:
- Init container tries to `pip install requests` from PyPI
- No internet access available

## Solution for Session 006

Build custom Docker image with dependencies pre-installed:

```dockerfile
FROM python:3.11-slim
RUN pip install requests urllib3
COPY config/webhook_receiver.py /app/webhook_receiver.py
COPY config/weekly_report.py /app/weekly_report.py
WORKDIR /app
CMD ["python3", "webhook_receiver.py"]

Then push to Harbor registry and update values.yaml to use local image.

Testing (Once Deployed)

1. Configure Harbor webhook: Project → Webhooks → Add
  - URL: http://cve-reporter:8080
  - Events: Scanning Completed
2. Trigger scan: curl -k -u admin:Harbor12345 -X POST 
https://harbor.apps.lab.ocp.lan/api/v2.0/projects/library/repositories/nginx/artifacts/1.19/scan
3. Check email: damoke012@hotmail.com
